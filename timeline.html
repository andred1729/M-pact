<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Video Background Example</title>

  
  <style>
    
    
    html, body {
        margin: 0;
        overflow: hidden;
        height: 100%;
        display: flex;
        justify-content: center; /* centers horizontally */
        align-items: center;     /* centers vertically */
        background: transparent; /* or your background color */
    }

    .content {
    background-color: rgba(0, 0, 0, 0.6); /* black with 60% opacity */
    color: white; /* text color */
    padding: 30px 40px;
    border-radius: 12px;
    max-width: 600px;
    box-shadow: 0 4px 15px rgba(0,0,0,0.5);
    text-align: center;
    }
    

    .video-background {
      position: fixed;
      top: 0;
      left: 0;
      width: 100vw;
      height: 100vh;
      overflow: hidden;
      z-index: -1;
    }

    .video-background iframe {
      width: 177.77vh; /* 100vh * (16/9 aspect ratio) */
      height: 100vh;
      position: absolute;
      top: 0%;
      left: 0%;
      right: 0%;
      transform: translateD(-50%);
      pointer-events: none;
      background: black;
    }

    .content {
      position: relative;
      z-index: 1;
      color: white;
      padding: 2rem;
    }

    .overlay {
    display: flex;
    justify-content: center;
    margin-top: 0.75rem;
    gap: 0.5rem;
    flex-wrap: wrap;
    }
    .overlay button {
        margin-top: .75rem; padding: .5rem 1.1rem; font-size: .85rem; border: 1px solid rgba(125,211,252,.45); border-radius: 999px;
        background: linear-gradient(120deg,#1d8cf8,#935ade); color: #fff; cursor: pointer; transition: transform .2s, box-shadow .2s;
        box-shadow: 0 8px 22px rgba(33,150,243,.35);
        
      }
      .overlay button:hover:enabled { transform: translateY(-1px); box-shadow: 0 12px 28px rgba(33,150,243,.4); }
      .overlay button:disabled { opacity: .6; cursor: default; box-shadow: none; }
      .overlay button.small{ padding:.35rem .75rem; font-size:.8rem; }
  </style>
</head>
<body>
    <div class="video-background">
    <div id="player"></div>
    </div>
      
  <div class="video-background">
    <iframe
    src="https://www.youtube.com/embed/MkRSmynqonM?autoplay=1&mute=1&loop=1&start=120&end=160&playlist=MkRSmynqonM&controls=0&modestbranding=1&rel=0&showinfo=0"
    frameborder="0"
    allow="autoplay; fullscreen; encrypted-media; picture-in-picture"
    allowfullscreen
  ></iframe>
  

  </div>

  <div class="content">
    <h1 id="timelineTitle">50 - 100 years before collision</h1>
    <p id="impactSummary" style="margin-top:0.75rem;"></p>
    <p>With decades of warning time before collision, mitigation measures are mostly preventative. 
        Since these methods generally involve using man-made spacecraft, 
        they require an incredibly long time to plan, develop, and test. Although these strategies haven’t been 
        researched or tested much (some more than others), they may prove effective in the future. </p>

        <div class="overlay" style="display:flex; gap:.5rem; flex-wrap:wrap; margin-top:.35rem">
            <button id="strategy" type="button" >Explore Mitigation Strategies</button>
          </div>

          <div class="overlay" style="display:flex; gap:.5rem; flex-wrap:wrap; margin-top:.35rem">
            <button id="home" type="button" >Back to Home</button>
          </div>
  </div>

<script>
    const strategyButton = document.getElementById("strategy");
    const homeButton = document.getElementById("home");
    const summaryEl = document.getElementById('impactSummary');
    const titleEl = document.getElementById('timelineTitle');

    const TIMELINE_CONTEXT_KEY = 'mpact:timelineContext';

    function safeParseJSON(raw) {
      if (!raw) return null;
      try { return JSON.parse(raw); } catch (err) { console.warn('[timeline] unable to parse stored context', err); return null; }
    }

    function formatNumber(value, fractionDigits = 2) {
      if (!Number.isFinite(value)) return null;
      const formatter = new Intl.NumberFormat('en-US', { maximumFractionDigits: fractionDigits, minimumFractionDigits: fractionDigits });
      return formatter.format(value);
    }

    const params = new URLSearchParams(window.location.search);
    const storedContext = safeParseJSON(sessionStorage.getItem(TIMELINE_CONTEXT_KEY));

    const context = storedContext || {
      impactLat: params.has('impactLat') ? Number(params.get('impactLat')) : null,
      impactLon: params.has('impactLon') ? Number(params.get('impactLon')) : null,
      craterRadiusMeters: params.has('craterRadiusMeters') ? Number(params.get('craterRadiusMeters')) : null,
      asteroidId: params.get('asteroidId') || null,
      isWaterImpact: params.has('isWaterImpact') ? params.get('isWaterImpact') === 'true' : null,
      impactEnergyJoules: null,
      impactSpeedMultiplier: null,
      impactAngleDegrees: null,
    };

    const latText = formatNumber(context?.impactLat, 2);
    const lonText = formatNumber(context?.impactLon, 2);
    const craterKm = formatNumber((context?.craterRadiusMeters || 0) / 1000, 2);
    const craterMiles = formatNumber((context?.craterRadiusMeters || 0) / 1609.344, 2);
    const angleText = formatNumber(context?.impactAngleDegrees, 0);
    const speedText = context?.impactSpeedMultiplier
      ? `${formatNumber((context.impactSpeedMultiplier || 0) * 32000, 0)} mph`
      : null;

    if (titleEl) {
      const impactType = context?.isWaterImpact === true ? 'Ocean Impact Timeline' : 'Impact Timeline';
      titleEl.textContent = impactType;
    }

    if (summaryEl) {
      const parts = [];
      if (latText && lonText) parts.push(`Impact site: ${latText}°, ${lonText}°`);
      if (context?.asteroidId) parts.push(`Asteroid profile: ${context.asteroidId}`);
      if (angleText) parts.push(`Entry angle: ${angleText}°`);
      if (speedText) parts.push(`Speed: ${speedText}`);
      if (Number.isFinite(context?.craterRadiusMeters)) {
        parts.push(`Estimated crater radius: ${formatNumber(context.craterRadiusMeters, 0)} m`);
        if (craterKm) parts.push(`(~${craterKm} km)`);
      }
      summaryEl.textContent = parts.length ? parts.join(' · ') : 'Impact context unavailable. Select an impact site in the simulator to populate these details.';
    }

    homeButton?.addEventListener('click', () => { window.location.href = '/index.html'; });

    strategyButton?.addEventListener('click', () => { window.location.href = '/strategy.html'; });

</script>
</body>

</html>
